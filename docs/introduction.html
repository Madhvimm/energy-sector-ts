<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.548">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Powering Change - Introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Powering Change</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./introduction.html" aria-current="page"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data-sources.html"> 
<span class="menu-text">Data Sources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data-visualization.html"> 
<span class="menu-text">Data Visualization</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./exploratory-data-analysis.html"> 
<span class="menu-text">EDA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./univariate-ts-models.html"> 
<span class="menu-text">Univariate TS Models (ARIMA/SARIMA)</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./multivariate-ts-models.html"> 
<span class="menu-text">Multivariate TS Models (ARIMAX/SARIMAX/VAR)</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./financial-ts-models.html"> 
<span class="menu-text">Financial Time Series Models (ARCH/GARCH)</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./deep-learning-ts.qmd"> 
<span class="menu-text">Deep Learning for TS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./conclusions.qmd"> 
<span class="menu-text">Conclusions</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#powering-change-the-economic-impact-of-the-energy-sector" id="toc-powering-change-the-economic-impact-of-the-energy-sector" class="nav-link active" data-scroll-target="#powering-change-the-economic-impact-of-the-energy-sector"><strong>Powering Change: The Economic Impact of the Energy Sector</strong></a>
  <ul class="collapse">
  <li><a href="#bigger-picture" id="toc-bigger-picture" class="nav-link" data-scroll-target="#bigger-picture"><strong>Bigger Picture</strong></a></li>
  <li><a href="#analytical-angles" id="toc-analytical-angles" class="nav-link" data-scroll-target="#analytical-angles"><strong>Analytical Angles</strong></a>
  <ul class="collapse">
  <li><a href="#energy-market-dynamics" id="toc-energy-market-dynamics" class="nav-link" data-scroll-target="#energy-market-dynamics">1. <strong>Energy Market Dynamics</strong>:</a></li>
  <li><a href="#economic-indicators-interplay" id="toc-economic-indicators-interplay" class="nav-link" data-scroll-target="#economic-indicators-interplay">2. <strong>Economic Indicators Interplay</strong>:</a></li>
  <li><a href="#renewable-energy-integration" id="toc-renewable-energy-integration" class="nav-link" data-scroll-target="#renewable-energy-integration">3. <strong>Renewable Energy Integration</strong>:</a></li>
  <li><a href="#sector-specific-effects" id="toc-sector-specific-effects" class="nav-link" data-scroll-target="#sector-specific-effects">4. <strong>Sector-Specific Effects</strong>:</a></li>
  <li><a href="#policy-influence" id="toc-policy-influence" class="nav-link" data-scroll-target="#policy-influence">5. <strong>Policy Influence</strong>:</a></li>
  </ul></li>
  <li><a href="#literature-review" id="toc-literature-review" class="nav-link" data-scroll-target="#literature-review"><strong>Literature Review</strong></a></li>
  <li><a href="#guiding-questions" id="toc-guiding-questions" class="nav-link" data-scroll-target="#guiding-questions"><strong>Guiding Questions:</strong></a></li>
  <li><a href="#reference" id="toc-reference" class="nav-link" data-scroll-target="#reference"><strong>Reference</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="powering-change-the-economic-impact-of-the-energy-sector" class="level1">
<h1><strong>Powering Change: The Economic Impact of the Energy Sector</strong></h1>
<p><em>“To truly transform our economy, protect our security, and save our planet from the ravages of climate change, we need to ultimately make clean, renewable energy the profitable kind of energy.”</em> – Barack Obama</p>
<p>In an era when the imperative of sustainability intersects with the dynamics of global energy markets, understanding the economic impact of the energy sector becomes crucial, and the statement by former President Barack Obama encapsulates the urgent need to transition towards a sustainable energy future, one that harmonizes economic growth, energy security, and environmental preservation. As the world grapples with the pressing challenges of climate change, energy production and consumption dynamics have emerged as a pivotal force shaping our economic landscapes.</p>
<p>In this project, I aim to delve deeper into the economic impact of different energy sources, exploring the intricate relationship between energy prices, specifically crude oil, and natural gas, and their production and shedding light on the growing role of renewable energy and its impact on traditional energy markets. Additionally, investigating the relationship between energy prices and major economic indicators such as the Gross Domestic Product (GDP) and the Consumer Price Index (CPI), uncovering their ripple effects, if any, in the economy.</p>
<p>By meticulously analyzing data from various sectors, including historical energy prices, electricity costs, economic indicators, and renewable energy production, this project aims to uncover valuable insights that could inform policy decisions, business strategies, and future research endeavors.</p>
<section id="bigger-picture" class="level2">
<h2 class="anchored" data-anchor-id="bigger-picture"><strong>Bigger Picture</strong></h2>
<p>Before diving into the intricate details, it is essential to understand the broader landscape. This project aims to link the price dynamics of crude oil and natural gas with their effects on the economy, providing a comprehensive analysis within the global context. Understanding this bigger picture is crucial for grasping the multi-layered relationships between the energy sector and economic development.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Economic Impact of the Energy Sector.png" class="img-fluid figure-img"></p>
<figcaption><em>Figure 1: This blueprint represents the project’s scope.</em></figcaption>
</figure>
</div>
<p>This visual representation will serve as a guide through the thematic explorations of the project, setting the stage for a deep dive into the complex interplay between energy dynamics and economic indicators.</p>
</section>
<section id="analytical-angles" class="level2">
<h2 class="anchored" data-anchor-id="analytical-angles"><strong>Analytical Angles</strong></h2>
<p>To navigate the complexities of how energy prices influence the U.S. economy, this project will dissect the data through multiple lenses, each offering a unique insight into the dynamics at play. The following analytical angles will structure our exploration:</p>
<section id="energy-market-dynamics" class="level3">
<h3 class="anchored" data-anchor-id="energy-market-dynamics">1. <strong>Energy Market Dynamics</strong>:</h3>
<p>We will examine the historical trends and volatility in crude oil and natural gas markets. Understanding these patterns is critical in comprehending how energy costs affect the broader economy and predicting future trends.</p>
</section>
<section id="economic-indicators-interplay" class="level3">
<h3 class="anchored" data-anchor-id="economic-indicators-interplay">2. <strong>Economic Indicators Interplay</strong>:</h3>
<p>A critical angle is the relationship between energy prices and primary economic indicators, like GDP and CPI. This perspective will allow us to measure the real impact of energy market fluctuations on financial health and consumer purchasing power.</p>
</section>
<section id="renewable-energy-integration" class="level3">
<h3 class="anchored" data-anchor-id="renewable-energy-integration">3. <strong>Renewable Energy Integration</strong>:</h3>
<p>As the energy sector evolves, so too does its economic impact. We’ll assess how the increasing presence of renewable energy in the national energy portfolio influences the traditional energy market and what that means for the future economy.</p>
</section>
<section id="sector-specific-effects" class="level3">
<h3 class="anchored" data-anchor-id="sector-specific-effects">4. <strong>Sector-Specific Effects</strong>:</h3>
<p>Different sectors respond to energy price changes in various ways. We’ll delve into sector-specific data, mainly focusing on how underlying energy prices shape electricity costs for residential, commercial, industrial, and transportation sectors.</p>
</section>
<section id="policy-influence" class="level3">
<h3 class="anchored" data-anchor-id="policy-influence">5. <strong>Policy Influence</strong>:</h3>
<p>Energy policies can have a profound impact on prices and market stability. We will analyze the effects of past and present energy policies on market behavior and economic outcomes, offering insights into effective policy frameworks.</p>
<p>Each of these angles will be explored through rigorous data analysis, employing time series methodologies to unpack the intricate relationship between energy markets and economic performance. By examining these perspectives, we aim to build a holistic understanding of the energy-economy nexus and provide actionable insights for policymakers, businesses, and consumers.</p>
<p><img src="energy.jpeg" class="img-fluid"></p>
</section>
</section>
<section id="literature-review" class="level2">
<h2 class="anchored" data-anchor-id="literature-review"><strong>Literature Review</strong></h2>
<p>The interplay between energy market fluctuations and economic indicators is a focal point of numerous studies, shedding light on how changes in energy prices influence economic growth, inflation, and regional development. This section integrates existing literature that provides the backdrop for our exploration of energy price impacts on the U.S. economy, with a particular focus on studies from the United States and China.</p>
<p>The report by the <strong>Congressional Budget Office</strong> titled <a href="https://www.cbo.gov/system/files?file=2018-10/07-21-energy-dist.pdf">The Economic Effects of Recent Increases in Energy Prices</a> examines the response of the U.S. economy to significant energy price shifts from 2004 to 2006. Despite notable increases in crude oil and natural gas prices, the report finds that the overall U.S. economy exhibited resilience, with moderate impacts on GDP, employment, and inflation. This resilience is attributed to robust economic conditions, effective monetary policies, and increased economic flexibility and stability over the years. This study provides a crucial understanding of how the U.S. economy adapts to energy price fluctuations, offering a valuable perspective for our analysis. The graph below from this report illustrates U.S. spending on petroleum as a percentage of the Gross Domestic Product (GDP), showing that, despite fluctuations in energy prices, the overall economic impact has been moderate. However, certain periods have seen significant spikes in energy spending relative to the nation’s economic output.</p>
<p><img src="CBO Graph.png" alt="CBO Graph" style="width: 500px; height: 400px;"></p>
<p>In contrast, <strong>Liping Wang’s</strong> study on <a href="https://doi.org/10.1016/j.resourpol.2021.102484">The impact of energy price fluctuations on regional economic development based on a panel data model</a> focuses on China, revealing the differential regional impacts of energy price changes on economic growth. Using data from 30 provinces and employing the FMOLS co-integration estimation method, Wang’s findings indicate that energy price variations, particularly in coal, electricity, and oil, have a tangible yet varying impact on China’s regional economies. The study underscores the significance of understanding regional disparities in energy price impacts, which could provide insightful comparisons for analyzing the U.S. context in our project.</p>
<p>These studies collectively enrich our investigation, offering comparative insights and methodological approaches to understanding the nuanced relationships between energy prices and economic indicators. By drawing on these studies, our project aims to dissect the specific dynamics within the U.S. energy market and its economic ramifications, enhancing our understanding and contributing to the broader discourse on energy economics.</p>
</section>
<section id="guiding-questions" class="level2">
<h2 class="anchored" data-anchor-id="guiding-questions"><strong>Guiding Questions:</strong></h2>
<p>Here are the guiding questions that will guide the research by shedding light on the multifaceted nature of the relationship between the energy sector and the economy:</p>
<ol type="1">
<li><p><strong>How have crude oil price fluctuations correlated with changes in the U.S. Gross Domestic Product (GDP)?</strong></p></li>
<li><p><strong>What trends can be identified in natural gas prices, and how have they historically impacted the cost of electricity for various consumer sectors?</strong></p></li>
<li><p><strong>In periods of significant oil price changes, how has the Consumer Price Index (CPI) reacted, particularly with respect to energy-intensive goods and services?</strong></p></li>
<li><p><strong>How do increases in natural gas prices affect the industrial sector’s energy expenses compared to the residential and commercial sectors?</strong></p></li>
<li><p><strong>What is the relationship between crude oil prices and transportation sector electricity costs, and how does this relationship affect broader transportation industry economics?</strong></p></li>
<li><p><strong>Can we identify a lag effect between changes in crude oil and natural gas prices and subsequent adjustments in electricity pricing across different sectors?</strong></p></li>
<li><p><strong>To what extent do variations in crude oil and natural gas prices explain the year-to-year variability in the U.S. inflation rate?</strong></p></li>
<li><p><strong>How have renewable energy production trends influenced the electricity pricing strategies of utility companies in the residential sector?</strong></p></li>
<li><p><strong>During times of high volatility in energy prices, how resilient has the U.S. economy been in terms of maintaining growth and managing inflation?</strong></p></li>
<li><p><strong>What patterns emerge when comparing the energy prices with the economic growth cycles, and what might this imply for future economic planning and energy policy?</strong></p></li>
</ol>
</section>
<section id="reference" class="level2">
<h2 class="anchored" data-anchor-id="reference"><strong>Reference</strong></h2>
<p>[1] Wang, L. (2022). Research on the impact of energy price fluctuations on regional economic development based on panel data model. Resources Policy, 75, 102484. https://doi.org/10.1016/j.resourpol.2021.102484</p>
<p>[2] Congressional Budget Office. (2006, July). The economic effects of recent increases in energy prices (Pub. No.&nbsp;2835). The Congress of the United States, Congressional Budget Office. https://www.cbo.gov/system/files?file=2018-10/07-21-energy-dist.pdf</p>
<p>[3] https://www.eia.gov/totalenergy/data/monthly/</p>
<p><a href="./data-sources.html" class="next-page-link" style="float: right;">Next Page: Data Sources →</a></p>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>